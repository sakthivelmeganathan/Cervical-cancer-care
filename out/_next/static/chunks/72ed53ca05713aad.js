(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,24301,e=>{e.v({actions:"page-module__5sROra__actions",button:"page-module__5sROra__button",cancelButton:"page-module__5sROra__cancelButton",container:"page-module__5sROra__container",field:"page-module__5sROra__field",fields:"page-module__5sROra__fields",form:"page-module__5sROra__form",header:"page-module__5sROra__header",input:"page-module__5sROra__input",saveButton:"page-module__5sROra__saveButton",section:"page-module__5sROra__section"})},91174,e=>{"use strict";var a=e.i(43476),t=e.i(71645),l=e.i(18566),n=e.i(11795),s=e.i(22016),o=e.i(24301);function i({id:e}){let i=(0,l.useRouter)(),r=(0,n.createClient)(),[d,c]=(0,t.useState)(!0),[u,_]=(0,t.useState)(!1),[m,h]=(0,t.useState)({full_name:"",phone:"",date_of_birth:"",blood_group:"",marital_status:"",emergency_contact_name:"",emergency_contact_phone:""});(0,t.useEffect)(()=>{p()},[]);let p=async()=>{let{data:{user:a}}=await r.auth.getUser();if(!a)return void i.push("/login");let{data:t,error:l}=await r.from("users").select("full_name, phone").eq("id",e).single(),{data:n,error:s}=await r.from("patients").select("*").eq("user_id",e).single();t&&h({full_name:t.full_name||"",phone:t.phone||"",date_of_birth:n?.date_of_birth||"",blood_group:n?.blood_group||"",marital_status:n?.marital_status||"",emergency_contact_name:n?.emergency_contact_name||"",emergency_contact_phone:n?.emergency_contact_phone||""}),c(!1)},f=e=>{h(a=>({...a,[e.target.name]:e.target.value}))},g=async a=>{a.preventDefault(),_(!0);try{let{error:a}=await r.from("users").update({full_name:m.full_name,phone:m.phone}).eq("id",e);if(a)throw a;let{error:t}=await r.from("patients").update({date_of_birth:m.date_of_birth||null,blood_group:m.blood_group,marital_status:m.marital_status,emergency_contact_name:m.emergency_contact_name,emergency_contact_phone:m.emergency_contact_phone}).eq("user_id",e);if(t)throw t;i.push(`/doctor/patients/${e}`),i.refresh()}catch(e){console.error("Error updating patient profile:",e),alert("Failed to update profile. Please try again.")}finally{_(!1)}};return d?(0,a.jsx)("div",{className:o.default.container,children:"Loading..."}):(0,a.jsxs)("div",{className:o.default.container,children:[(0,a.jsxs)("header",{className:o.default.header,children:[(0,a.jsx)("h1",{children:"Edit Patient Profile"}),(0,a.jsx)("p",{children:"Update personal and medical information"})]}),(0,a.jsxs)("form",{onSubmit:g,className:o.default.form,children:[(0,a.jsxs)("div",{className:o.default.section,children:[(0,a.jsx)("h2",{children:"Personal Details"}),(0,a.jsxs)("div",{className:o.default.fields,children:[(0,a.jsxs)("div",{className:o.default.field,children:[(0,a.jsx)("label",{htmlFor:"full_name",children:"Full Name"}),(0,a.jsx)("input",{type:"text",id:"full_name",name:"full_name",value:m.full_name,onChange:f,className:o.default.input,required:!0})]}),(0,a.jsxs)("div",{className:o.default.field,children:[(0,a.jsx)("label",{htmlFor:"phone",children:"Phone Number"}),(0,a.jsx)("input",{type:"tel",id:"phone",name:"phone",value:m.phone,onChange:f,className:o.default.input})]}),(0,a.jsxs)("div",{className:o.default.field,children:[(0,a.jsx)("label",{htmlFor:"date_of_birth",children:"Date of Birth"}),(0,a.jsx)("input",{type:"date",id:"date_of_birth",name:"date_of_birth",value:m.date_of_birth,onChange:f,className:o.default.input})]}),(0,a.jsxs)("div",{className:o.default.field,children:[(0,a.jsx)("label",{htmlFor:"marital_status",children:"Marital Status"}),(0,a.jsxs)("select",{id:"marital_status",name:"marital_status",value:m.marital_status,onChange:f,className:o.default.input,children:[(0,a.jsx)("option",{value:"",children:"Select Status"}),(0,a.jsx)("option",{value:"Single",children:"Single"}),(0,a.jsx)("option",{value:"Married",children:"Married"}),(0,a.jsx)("option",{value:"Divorced",children:"Divorced"}),(0,a.jsx)("option",{value:"Widowed",children:"Widowed"})]})]})]})]}),(0,a.jsxs)("div",{className:o.default.section,children:[(0,a.jsx)("h2",{children:"Medical Info"}),(0,a.jsx)("div",{className:o.default.fields,children:(0,a.jsxs)("div",{className:o.default.field,children:[(0,a.jsx)("label",{htmlFor:"blood_group",children:"Blood Group"}),(0,a.jsxs)("select",{id:"blood_group",name:"blood_group",value:m.blood_group,onChange:f,className:o.default.input,children:[(0,a.jsx)("option",{value:"",children:"Select Blood Group"}),(0,a.jsx)("option",{value:"A+",children:"A+"}),(0,a.jsx)("option",{value:"A-",children:"A-"}),(0,a.jsx)("option",{value:"B+",children:"B+"}),(0,a.jsx)("option",{value:"B-",children:"B-"}),(0,a.jsx)("option",{value:"AB+",children:"AB+"}),(0,a.jsx)("option",{value:"AB-",children:"AB-"}),(0,a.jsx)("option",{value:"O+",children:"O+"}),(0,a.jsx)("option",{value:"O-",children:"O-"})]})]})})]}),(0,a.jsxs)("div",{className:o.default.section,children:[(0,a.jsx)("h2",{children:"Emergency Contact"}),(0,a.jsxs)("div",{className:o.default.fields,children:[(0,a.jsxs)("div",{className:o.default.field,children:[(0,a.jsx)("label",{htmlFor:"emergency_contact_name",children:"Contact Name"}),(0,a.jsx)("input",{type:"text",id:"emergency_contact_name",name:"emergency_contact_name",value:m.emergency_contact_name,onChange:f,className:o.default.input})]}),(0,a.jsxs)("div",{className:o.default.field,children:[(0,a.jsx)("label",{htmlFor:"emergency_contact_phone",children:"Contact Phone"}),(0,a.jsx)("input",{type:"tel",id:"emergency_contact_phone",name:"emergency_contact_phone",value:m.emergency_contact_phone,onChange:f,className:o.default.input})]})]})]}),(0,a.jsxs)("div",{className:o.default.actions,children:[(0,a.jsx)(s.default,{href:`/doctor/patients/${e}`,className:`${o.default.button} ${o.default.cancelButton}`,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:`${o.default.button} ${o.default.saveButton}`,disabled:u,children:u?"Saving...":"Save Changes"})]})]})]})}e.s(["default",()=>i])}]);