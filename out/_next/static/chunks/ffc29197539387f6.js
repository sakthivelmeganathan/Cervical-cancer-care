(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,21218,e=>{"use strict";let t=(0,e.i(75254).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>t],21218)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},69074,e=>{"use strict";let t=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],69074)},65358,e=>{"use strict";var t=e.i(71645),i=e.i(18566),d=e.i(11795);function l({table:e,channelName:l,filter:r}){let s=(0,i.useRouter)(),n=(0,d.createClient)();return(0,t.useEffect)(()=>{let t=n.channel(l||`public:${e}`).on("postgres_changes",{event:"*",schema:"public",table:e,filter:r},()=>{console.log(`Change detected in ${e}, refreshing...`),s.refresh()}).subscribe();return()=>{n.removeChannel(t)}},[n,s,e,l,r]),null}e.s(["default",()=>l])},51205,e=>{e.v({card:"page-module__Ey1hlW__card",container:"page-module__Ey1hlW__container",content:"page-module__Ey1hlW__content",grid:"page-module__Ey1hlW__grid",header:"page-module__Ey1hlW__header",headerActions:"page-module__Ey1hlW__headerActions",profileField:"page-module__Ey1hlW__profileField",profileSection:"page-module__Ey1hlW__profileSection",roleBadge:"page-module__Ey1hlW__roleBadge"})},93596,e=>{"use strict";var t=e.i(43476),i=e.i(71645),d=e.i(18566),l=e.i(11795);e.i(47167);var r=e.i(22016),s=e.i(51205),n=e.i(69074),a=e.i(78583);let o=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var c=e.i(63209),p=e.i(31278),h=e.i(83773);function g({patientId:e,doctorId:r}){let{t:s}=(0,h.useLanguage)(),[g,m]=(0,i.useState)(!1),[x,f]=(0,i.useState)(null),[y,j]=(0,i.useState)("Lab Report"),[u,b]=(0,i.useState)(""),[v,_]=(0,i.useState)(null),[D,W]=(0,i.useState)(!1),S=(0,i.useRef)(null),A=(0,d.useRouter)(),w=(0,l.createClient)(),N=async()=>{if(!x)return void _(s("doctor.uploadReport.selectFile"));m(!0),_(null);try{let t=x.name.split(".").pop(),i=`${e}/${Date.now()}-${Math.random().toString(36).substring(7)}.${t}`,{error:d}=await w.storage.from("medical-documents").upload(i,x);if(d)throw d;let{error:l}=await w.from("medical_reports").insert({patient_id:e,doctor_id:r,file_name:x.name,file_path:i,file_type:x.type,report_type:y,description:u});if(l)throw l;W(!0),f(null),b(""),j("Lab Report"),S.current&&(S.current.value=""),A.refresh(),setTimeout(()=>W(!1),3e3)}catch(e){_(e instanceof Error?e.message:s("common.error"))}finally{m(!1)}};return(0,t.jsxs)("div",{style:{padding:"1.5rem",background:"#fff",borderRadius:"0.75rem",border:"1px solid #e5e7eb",marginTop:"1.5rem"},children:[(0,t.jsxs)("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsx)(n.Upload,{size:20,className:"text-blue-600"}),s("doctor.uploadReport.title")]}),v&&(0,t.jsxs)("div",{style:{padding:"0.75rem",background:"#fef2f2",color:"#b91c1c",borderRadius:"0.5rem",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[(0,t.jsx)(c.AlertCircle,{size:16}),v]}),D&&(0,t.jsxs)("div",{style:{padding:"0.75rem",background:"#ecfdf5",color:"#059669",borderRadius:"0.5rem",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[(0,t.jsx)(o,{size:16}),s("doctor.uploadReport.success")]}),(0,t.jsxs)("div",{style:{display:"grid",gap:"1rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500},children:s("doctor.uploadReport.reportType")}),(0,t.jsxs)("select",{value:y,onChange:e=>j(e.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #d1d5db"},children:[(0,t.jsx)("option",{value:"Lab Report",children:s("doctor.uploadReport.types.lab")}),(0,t.jsx)("option",{value:"Imaging/Scan",children:s("doctor.uploadReport.types.imaging")}),(0,t.jsx)("option",{value:"Prescription",children:s("doctor.uploadReport.types.prescription")}),(0,t.jsx)("option",{value:"Discharge Summary",children:s("doctor.uploadReport.types.discharge")}),(0,t.jsx)("option",{value:"Other",children:s("doctor.uploadReport.types.other")})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500},children:s("doctor.uploadReport.description")}),(0,t.jsx)("input",{type:"text",value:u,onChange:e=>b(e.target.value),placeholder:s("doctor.uploadReport.descriptionPlaceholder"),style:{width:"100%",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #d1d5db"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500},children:s("doctor.uploadReport.fileAttachment")}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,t.jsx)("input",{type:"file",ref:S,onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];if(t.size>0x3200000)return void _(s("doctor.uploadReport.alert"));f(t),_(null),W(!1)}},accept:".pdf,.jpg,.jpeg,.png",style:{display:"none"},id:"file-upload"}),(0,t.jsxs)("label",{htmlFor:"file-upload",style:{cursor:"pointer",padding:"0.5rem 1rem",background:"#f3f4f6",borderRadius:"0.375rem",fontSize:"0.875rem",color:"#374151",border:"1px solid #d1d5db",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsx)(a.FileText,{size:16}),x?s("doctor.uploadReport.changeFile"):s("doctor.uploadReport.selectFile")]}),x&&(0,t.jsx)("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:x.name})]})]}),(0,t.jsx)("div",{style:{marginTop:"0.5rem"},children:(0,t.jsx)("button",{onClick:N,disabled:!x||g,style:{width:"100%",padding:"0.75rem",background:g?"#93c5fd":"#2563eb",color:"white",borderRadius:"0.375rem",border:"none",fontWeight:500,cursor:g?"not-allowed":"pointer",display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem"},children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{size:18,className:"animate-spin"}),s("doctor.uploadReport.uploading")]}):s("doctor.uploadReport.upload")})})]})]})}var m=e.i(40160),x=e.i(21218),f=e.i(65358);function y({userData:e,patientData:i,patientUserId:d,medicalHistory:l,screeningRecords:n,diagnoses:o,treatments:c,medications:p,appointments:y,reports:j,symptomLogs:u,doctorId:b}){let{t:v}=(0,h.useLanguage)();return(0,t.jsxs)("div",{className:s.default.container,children:[(0,t.jsxs)("header",{className:s.default.header,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:e.full_name}),(0,t.jsx)("p",{children:v("doctor.patientDetails.title")})]}),(0,t.jsxs)("div",{className:s.default.headerActions,children:[(0,t.jsx)(r.default,{href:"/doctor/patients",className:"btn btn-outline",children:v("doctor.patientDetails.actions.back")}),(0,t.jsx)(r.default,{href:`/doctor/patients/${d}/edit`,className:"btn btn-primary",children:v("doctor.patientDetails.actions.edit")})]})]}),(0,t.jsxs)("div",{className:s.default.grid,children:[(0,t.jsxs)("div",{className:s.default.card,children:[(0,t.jsx)("h2",{children:v("doctor.patientDetails.sections.personal")}),(0,t.jsxs)("div",{className:s.default.profileSection,children:[(0,t.jsxs)("div",{className:s.default.profileField,children:[(0,t.jsx)("label",{children:v("doctor.patientDetails.fields.name")}),(0,t.jsx)("p",{children:e.full_name})]}),(0,t.jsxs)("div",{className:s.default.profileField,children:[(0,t.jsx)("label",{children:v("doctor.patientDetails.fields.email")}),(0,t.jsx)("p",{children:e.email})]}),(0,t.jsxs)("div",{className:s.default.profileField,children:[(0,t.jsx)("label",{children:v("doctor.patientDetails.fields.phone")}),(0,t.jsx)("p",{children:e.phone||"Not provided"})]}),(0,t.jsxs)("div",{className:s.default.profileField,children:[(0,t.jsx)("label",{children:v("doctor.patientDetails.fields.memberSince")}),(0,t.jsx)("p",{children:new Date(e.created_at).toLocaleDateString()})]})]})]}),(0,t.jsxs)("div",{className:s.default.card,children:[(0,t.jsx)("h2",{children:v("doctor.patientDetails.sections.medical")}),(0,t.jsxs)("div",{className:s.default.profileSection,children:[(0,t.jsxs)("div",{className:s.default.profileField,children:[(0,t.jsx)("label",{children:v("doctor.patientDetails.fields.dob")}),(0,t.jsx)("p",{children:i?.date_of_birth?new Date(i.date_of_birth).toLocaleDateString():"Not recorded"})]}),(0,t.jsxs)("div",{className:s.default.profileField,children:[(0,t.jsx)("label",{children:v("doctor.patientDetails.fields.age")}),(0,t.jsx)("p",{children:i?.age?`${i.age} years`:"--"})]}),(0,t.jsxs)("div",{className:s.default.profileField,children:[(0,t.jsx)("label",{children:v("doctor.patientDetails.fields.bloodGroup")}),(0,t.jsx)("p",{children:i?.blood_group||"--"})]}),(0,t.jsxs)("div",{className:s.default.profileField,children:[(0,t.jsx)("label",{children:v("doctor.patientDetails.fields.maritalStatus")}),(0,t.jsx)("p",{children:i?.marital_status||"--"})]}),(0,t.jsxs)("div",{className:s.default.profileField,children:[(0,t.jsx)("label",{children:v("doctor.patientDetails.fields.gender")}),(0,t.jsx)("p",{children:i?.gender||"--"})]})]})]}),(0,t.jsxs)("div",{className:s.default.card,children:[(0,t.jsx)("h2",{children:v("doctor.patientDetails.sections.emergency")}),(0,t.jsxs)("div",{className:s.default.profileSection,children:[(0,t.jsxs)("div",{className:s.default.profileField,children:[(0,t.jsx)("label",{children:v("doctor.patientDetails.fields.contactName")}),(0,t.jsx)("p",{children:i?.emergency_contact_name||"Not provided"})]}),(0,t.jsxs)("div",{className:s.default.profileField,children:[(0,t.jsx)("label",{children:v("doctor.patientDetails.fields.contactPhone")}),(0,t.jsx)("p",{children:i?.emergency_contact_phone||"Not provided"})]})]})]}),(0,t.jsx)("div",{style:{gridColumn:"1 / -1"},children:(0,t.jsxs)("div",{className:s.default.card,children:[(0,t.jsx)("h2",{children:v("doctor.patientDetails.sections.history")}),(0,t.jsx)("div",{style:{marginTop:"1.5rem",display:"grid",gap:"1rem"},children:l&&l.length>0?(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{background:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Condition"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Diagnosed Date"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Notes"})]})}),(0,t.jsx)("tbody",{children:l.map(e=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[(0,t.jsx)("td",{style:{padding:"0.75rem",fontWeight:500},children:e.condition}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:e.diagnosed_date?new Date(e.diagnosed_date).toLocaleDateString():"-"}),(0,t.jsx)("td",{style:{padding:"0.75rem",maxWidth:"300px"},children:e.notes||"-"})]},e.id))})]})}):(0,t.jsx)("p",{style:{color:"#6b7280",textAlign:"center",padding:"2rem"},children:v("doctor.patientDetails.emptyStates.noHistory")})})]})}),(0,t.jsx)("div",{style:{gridColumn:"1 / -1"},children:(0,t.jsxs)("div",{className:s.default.card,children:[(0,t.jsx)("h2",{children:v("doctor.patientDetails.sections.screening")}),(0,t.jsx)("div",{style:{marginTop:"1.5rem",display:"grid",gap:"1rem"},children:n&&n.length>0?(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{background:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Screening Type"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Date"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Result"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Notes"})]})}),(0,t.jsx)("tbody",{children:n.map(e=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[(0,t.jsx)("td",{style:{padding:"0.75rem",fontWeight:500},children:e.screening_type}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:new Date(e.screening_date).toLocaleDateString()}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:(0,t.jsx)("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"0.25rem",background:e.result?.toLowerCase().includes("negative")?"#ecfdf5":"#fef2f2",color:e.result?.toLowerCase().includes("negative")?"#047857":"#b91c1c",fontWeight:500},children:e.result||"Pending"})}),(0,t.jsx)("td",{style:{padding:"0.75rem",maxWidth:"300px"},children:e.notes||"-"})]},e.id))})]})}):(0,t.jsx)("p",{style:{color:"#6b7280",textAlign:"center",padding:"2rem"},children:v("doctor.patientDetails.emptyStates.noScreening")})})]})}),(0,t.jsx)("div",{style:{gridColumn:"1 / -1"},children:(0,t.jsxs)("div",{className:s.default.card,children:[(0,t.jsx)("h2",{children:v("doctor.patientDetails.sections.diagnoses")}),(0,t.jsx)("div",{style:{marginTop:"1.5rem",display:"grid",gap:"1rem"},children:o&&o.length>0?(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{background:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Diagnosis Date"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Type"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Stage"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Notes"})]})}),(0,t.jsx)("tbody",{children:o.map(e=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[(0,t.jsx)("td",{style:{padding:"0.75rem"},children:new Date(e.diagnosis_date).toLocaleDateString()}),(0,t.jsx)("td",{style:{padding:"0.75rem",fontWeight:500},children:e.type||"-"}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:(0,t.jsx)("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"0.25rem",background:"#fef3c7",color:"#92400e",fontWeight:500},children:e.stage||"Not specified"})}),(0,t.jsx)("td",{style:{padding:"0.75rem",maxWidth:"300px"},children:e.notes||"-"})]},e.id))})]})}):(0,t.jsx)("p",{style:{color:"#6b7280",textAlign:"center",padding:"2rem"},children:v("doctor.patientDetails.emptyStates.noDiagnoses")})})]})}),(0,t.jsx)("div",{style:{gridColumn:"1 / -1"},children:(0,t.jsxs)("div",{className:s.default.card,children:[(0,t.jsx)("h2",{children:v("doctor.patientDetails.sections.treatments")}),(0,t.jsx)("div",{style:{marginTop:"1.5rem",display:"grid",gap:"1rem"},children:c&&c.length>0?(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{background:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Treatment Type"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Start Date"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"End Date"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Status"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Notes"})]})}),(0,t.jsx)("tbody",{children:c.map(e=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[(0,t.jsx)("td",{style:{padding:"0.75rem",fontWeight:500},children:e.treatment_type}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:new Date(e.start_date).toLocaleDateString()}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:e.end_date?new Date(e.end_date).toLocaleDateString():"Ongoing"}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:(0,t.jsx)("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"0.25rem",background:"active"===e.status?"#dbeafe":"#f3f4f6",color:"active"===e.status?"#1e40af":"#6b7280",fontWeight:500,textTransform:"capitalize"},children:e.status||"Unknown"})}),(0,t.jsx)("td",{style:{padding:"0.75rem",maxWidth:"300px"},children:e.notes||"-"})]},e.id))})]})}):(0,t.jsx)("p",{style:{color:"#6b7280",textAlign:"center",padding:"2rem"},children:v("doctor.patientDetails.emptyStates.noTreatments")})})]})}),(0,t.jsx)("div",{style:{gridColumn:"1 / -1"},children:(0,t.jsxs)("div",{className:s.default.card,children:[(0,t.jsx)("h2",{children:v("doctor.patientDetails.sections.medications")}),(0,t.jsx)("div",{style:{marginTop:"1.5rem",display:"grid",gap:"1rem"},children:p&&p.length>0?(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{background:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Medication"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Dosage"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Frequency"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Start Date"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"End Date"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Prescribing Doctor"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Notes"})]})}),(0,t.jsx)("tbody",{children:p.map(e=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[(0,t.jsx)("td",{style:{padding:"0.75rem",fontWeight:500},children:e.medication_name}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:e.dosage}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:e.frequency}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:new Date(e.start_date).toLocaleDateString()}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:e.end_date?new Date(e.end_date).toLocaleDateString():"Ongoing"}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:e.prescribing_doctor||"-"}),(0,t.jsx)("td",{style:{padding:"0.75rem",maxWidth:"200px"},children:e.notes||"-"})]},e.id))})]})}):(0,t.jsx)("p",{style:{color:"#6b7280",textAlign:"center",padding:"2rem"},children:v("doctor.patientDetails.emptyStates.noMedications")})})]})}),(0,t.jsx)("div",{style:{gridColumn:"1 / -1"},children:(0,t.jsxs)("div",{className:s.default.card,children:[(0,t.jsxs)("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsx)(x.Activity,{className:"text-blue-600",size:24}),v("doctor.patientDetails.sections.symptoms")]}),(0,t.jsx)("div",{style:{marginTop:"1.5rem",display:"grid",gap:"1rem"},children:u&&u.length>0?(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{background:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Date"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Pain (0-10)"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Fatigue (0-10)"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Bleeding"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Other Symptoms"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Notes"})]})}),(0,t.jsx)("tbody",{children:u.map(e=>{let i=Object.entries(e.symptoms||{}).filter(e=>!0===e[1]).map(([e])=>e.replace("_"," "));return(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[(0,t.jsx)("td",{style:{padding:"0.75rem"},children:new Date(e.log_date).toLocaleDateString()}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:(0,t.jsx)("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"0.25rem",background:e.pain_level>5?"#fef2f2":"#ecfdf5",color:e.pain_level>5?"#b91c1c":"#047857",fontWeight:500},children:e.pain_level})}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:e.fatigue_level}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:e.bleeding?(0,t.jsx)("span",{style:{color:"#dc2626",fontWeight:500},children:"Yes"}):(0,t.jsx)("span",{style:{color:"#059669"},children:"No"})}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:i.length>0?(0,t.jsx)("div",{style:{display:"flex",gap:"0.25rem",flexWrap:"wrap"},children:i.map(e=>(0,t.jsx)("span",{style:{fontSize:"0.75rem",background:"#f3f4f6",padding:"2px 6px",borderRadius:"4px",textTransform:"capitalize"},children:e},e))}):"-"}),(0,t.jsx)("td",{style:{padding:"0.75rem",maxWidth:"300px"},children:e.notes||"-"})]},e.id)})})]})}):(0,t.jsx)("p",{style:{color:"#6b7280",textAlign:"center",padding:"2rem"},children:v("doctor.patientDetails.emptyStates.noSymptoms")})})]})}),(0,t.jsx)("div",{style:{gridColumn:"1 / -1"},children:(0,t.jsxs)("div",{className:s.default.card,children:[(0,t.jsx)("h2",{children:v("doctor.patientDetails.sections.appointments")}),(0,t.jsx)("div",{style:{marginTop:"1.5rem",display:"grid",gap:"1rem"},children:y&&y.length>0?(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{background:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Date"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Type"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Status"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:600},children:"Notes"})]})}),(0,t.jsx)("tbody",{children:y.map(e=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[(0,t.jsxs)("td",{style:{padding:"0.75rem"},children:[new Date(e.appointment_date).toLocaleDateString()," ",new Date(e.appointment_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(0,t.jsx)("td",{style:{padding:"0.75rem",fontWeight:500,textTransform:"capitalize"},children:e.appointment_type.replace("_"," ")}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:(0,t.jsx)("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"0.25rem",background:"confirmed"===e.status||"completed"===e.status?"#ecfdf5":"cancelled"===e.status||"no_show"===e.status?"#fef2f2":"#fff7ed",color:"confirmed"===e.status||"completed"===e.status?"#047857":"cancelled"===e.status||"no_show"===e.status?"#b91c1c":"#c2410c",fontWeight:500,textTransform:"capitalize"},children:e.status})}),(0,t.jsx)("td",{style:{padding:"0.75rem",maxWidth:"300px"},children:e.notes||"-"})]},e.id))})]})}):(0,t.jsx)("p",{style:{color:"#6b7280",textAlign:"center",padding:"2rem"},children:v("doctor.patientDetails.emptyStates.noAppointments")})})]})}),(0,t.jsx)("div",{style:{gridColumn:"1 / -1"},children:(0,t.jsxs)("div",{className:s.default.card,children:[(0,t.jsx)("h2",{children:v("doctor.patientDetails.sections.reports")}),i&&(0,t.jsx)(g,{patientId:i.id,doctorId:b}),(0,t.jsx)("div",{style:{marginTop:"1.5rem",display:"grid",gap:"1rem"},children:j&&j.length>0?j.map(e=>(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"#f9fafb",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,t.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#e0e7ff",color:"#4338ca",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)(a.FileText,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontWeight:600,color:"#111827"},children:e.report_type}),(0,t.jsxs)("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:[new Date(e.created_at).toLocaleDateString(),e.description&&` â€¢ ${e.description}`]})]})]}),(0,t.jsxs)("a",{href:`https://moglmxolvmbcmdktrerl.supabase.co/storage/v1/object/public/medical-documents/${e.file_path}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsx)(m.Download,{size:16}),v("doctor.patientDetails.emptyStates.view")||"View"]})]},e.id)):(0,t.jsx)("p",{style:{color:"#6b7280",textAlign:"center",padding:"2rem"},children:v("doctor.patientDetails.emptyStates.noReports")})})]})}),(0,t.jsx)("div",{style:{display:"none"},children:i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.default,{table:"medical_reports",filter:`patient_id=eq.${i.id}`}),(0,t.jsx)(f.default,{table:"appointments",filter:`patient_id=eq.${i.id}`}),(0,t.jsx)(f.default,{table:"symptoms_log",filter:`patient_id=eq.${i.id}`})]})})]})]})}function j({id:e}){let r=(0,d.useRouter)(),s=(0,l.createClient)(),[n,a]=(0,i.useState)(!0),[o,c]=(0,i.useState)(null);return((0,i.useEffect)(()=>{!async function(){let{data:{user:t}}=await s.auth.getUser();if(!t)return r.push("/login");let{data:i,error:d}=await s.from("users").select("*").eq("id",e).single();if(d||!i)return r.push("/doctor/patients");let{data:l}=await s.from("patients").select("*").eq("user_id",e).single();if(l){let{data:e}=await s.from("patient_doctors").select("id").eq("patient_id",l.id).eq("doctor_id",t.id).limit(1);if(!e||0===e.length)return r.push("/doctor/patients");let[{data:d},{data:n},{data:a},{data:o},{data:p},{data:h},{data:g},{data:m}]=await Promise.all([s.from("patient_medical_history").select("*").eq("patient_id",l.id).order("diagnosed_date",{ascending:!1}),s.from("screening_records").select("*").eq("patient_id",l.id).order("screening_date",{ascending:!1}),s.from("diagnoses").select("*").eq("patient_id",l.id).order("diagnosis_date",{ascending:!1}),s.from("treatments").select("*").eq("patient_id",l.id).order("start_date",{ascending:!1}),s.from("medications").select("*").eq("patient_id",l.id).order("start_date",{ascending:!1}),s.from("appointments").select("*").eq("patient_id",l.id).order("appointment_date",{ascending:!1}),s.from("medical_reports").select("*").eq("patient_id",l.id).order("created_at",{ascending:!1}),s.from("symptoms_log").select("*").eq("patient_id",l.id).order("log_date",{ascending:!1})]);c({userData:i,patientData:l,medicalHistory:d||[],screeningRecords:n||[],diagnoses:a||[],treatments:o||[],medications:p||[],appointments:h||[],reports:g||[],symptomLogs:m||[],doctorId:t.id})}a(!1)}()},[e,r,s]),n)?(0,t.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading patient details..."}):o?(0,t.jsx)(y,{userData:o.userData,patientData:o.patientData,patientUserId:e,medicalHistory:o.medicalHistory,screeningRecords:o.screeningRecords,diagnoses:o.diagnoses,treatments:o.treatments,medications:o.medications,appointments:o.appointments,reports:o.reports,symptomLogs:o.symptomLogs,doctorId:o.doctorId}):(0,t.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"Patient not found or unauthorized."})}e.s(["default",()=>j],93596)}]);